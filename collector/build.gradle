apply plugin: 'java'

archivesBaseName = 'movies-collector'

sourceCompatibility = '1.6'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.code.gson:gson:2.2.2'
}

task standaloneJar(type: Jar) {
    tasks.clean.execute()
    tasks.compileJava.execute()
    from files(sourceSets.main.output.classesDir)
    from configurations.runtime.asFileTree.files.collect { zipTree(it) }

    manifest {
        attributes 'Main-Class': 'com.prondzyn.movies.collector.Main'
        attributes 'Compilation-Date': new Date()
    }
}